<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>District Designer</title>
		<link href="https://fonts.googleapis.com/css?family=Bitter" rel="stylesheet">
		<link href="css/stylesheet.css" rel="stylesheet">

		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
			  integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
			  crossorigin=""/>
		<!-- Make sure you put this AFTER Leaflet's CSS -->
		<script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
				integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
				crossorigin=""></script>
	</head>
	<body>
		<div class="siteContainer">
			<div class="headerPane">
					<ul>
						<!--<h2 style="float:left;margin:20px;">DISTRICT DESIGNER | CSE 308</h2>-->
						<img src="DDLogo_slanted.svg" style="height:auto;width:25%;">

						</svg>
						<li><a href="/#"><span>FAQ</span></a></li>
						<li><a href="/#"><span>District Map</span></a></li>
					</ul>
			</div>
			
			<div class="contentPane" style="background-color:#d3d3d3;">
				<div id="mapid" style="background-color: #ffffff;height:100%;width:100%;"></div>
			</div>

			<!--<div class="contentPane" style="background-color:#e3e3e3;">

			</div>-->
		</div>
		<script src="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.js"></script>
		<script src="catiline.js"></script>
		<script src="leaflet.shpfile.js"></script>
		<script>

            var mymap = L.map('mapid',{zoomControl:false/*, dragging:false, touchZoom:false, scrollWheelZoom:false, doubleClickZoom:false, touchZoom:false, boxZoom:false*/}).setView([44.8, -90], 7);//[37.5, -100], 4 old

            L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
                attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
                maxZoom: 18,
                id: 'mapbox.light',
                accessToken: 'pk.eyJ1IjoibG9uZ2giLCJhIjoiY2psem92M2JkMDN4bDNsbXlhZ2Z6ZzhoZiJ9.qEtkhzP-UwuKVkV5suN7sg'
            }).addTo(mymap)
			var shapecounter = 0;
            var shpfile = new L.Shapefile('shapefiles/tl_2012_55_vtd10.zip', {
                onEachFeature: function(feature, layer) {
                    console.log("Loaded feature #" + shapecounter++);
                    var out = [];
                    if (feature.properties) {
                        for(var key in feature.properties){
                            out.push(key+": "+feature.properties[key]);
                        }
                        layer.bindPopup(out.join("<br />"));
                        console.log(feature.properties['VTDST10']);
                    }
                },
                style: function style(feature) {
                    var name = feature.properties['NAME10'];
                    var suffixNum = name.substring(name.length-4, name.length);
                    console.log(suffixNum);
					return {
						color: '#FFFFFF',
						opacity: (feature.properties['NAME10']=='WATER' || suffixNum == '9999')?0.0:1.0,
						fillColor: (Math.random()>0.5)?'#0a369d':'#bf0a30',
						fillOpacity: (feature.properties['NAME10']=='WATER' || suffixNum == '9999')?0.0:1.0,
						weight: 1.25
					}
                }
            }
            );
            shpfile.addTo(mymap);
            shpfile.once("data:loaded", function() {
                console.log("finished loaded shapefile");
            });
		</script>
	</body>
</html>